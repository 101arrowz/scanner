{"mappings":"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","sources":["pkg/scanner.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-6c6b0965e4929c67.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-406a3c61b0b56fbd.js","src/workers/process.ts"],"sourcesContent":["\nlet wasm;\n\nconst heap = new Array(32).fill(undefined);\n\nheap.push(undefined, null, true, false);\n\nfunction getObject(idx) { return heap[idx]; }\n\nlet heap_next = heap.length;\n\nfunction dropObject(idx) {\n    if (idx < 36) return;\n    heap[idx] = heap_next;\n    heap_next = idx;\n}\n\nfunction takeObject(idx) {\n    const ret = getObject(idx);\n    dropObject(idx);\n    return ret;\n}\n\nfunction debugString(val) {\n    // primitive types\n    const type = typeof val;\n    if (type == 'number' || type == 'boolean' || val == null) {\n        return  `${val}`;\n    }\n    if (type == 'string') {\n        return `\"${val}\"`;\n    }\n    if (type == 'symbol') {\n        const description = val.description;\n        if (description == null) {\n            return 'Symbol';\n        } else {\n            return `Symbol(${description})`;\n        }\n    }\n    if (type == 'function') {\n        const name = val.name;\n        if (typeof name == 'string' && name.length > 0) {\n            return `Function(${name})`;\n        } else {\n            return 'Function';\n        }\n    }\n    // objects\n    if (Array.isArray(val)) {\n        const length = val.length;\n        let debug = '[';\n        if (length > 0) {\n            debug += debugString(val[0]);\n        }\n        for(let i = 1; i < length; i++) {\n            debug += ', ' + debugString(val[i]);\n        }\n        debug += ']';\n        return debug;\n    }\n    // Test for built-in\n    const builtInMatches = /\\[object ([^\\]]+)\\]/.exec(toString.call(val));\n    let className;\n    if (builtInMatches.length > 1) {\n        className = builtInMatches[1];\n    } else {\n        // Failed to match the standard '[object ClassName]'\n        return toString.call(val);\n    }\n    if (className == 'Object') {\n        // we're a user defined class or Object\n        // JSON.stringify avoids problems with cycles, and is generally much\n        // easier than looping through ownProperties of `val`.\n        try {\n            return 'Object(' + JSON.stringify(val) + ')';\n        } catch (_) {\n            return 'Object';\n        }\n    }\n    // errors\n    if (val instanceof Error) {\n        return `${val.name}: ${val.message}\\n${val.stack}`;\n    }\n    // TODO we could test for more things here, like `Set`s and `Map`s.\n    return className;\n}\n\nlet WASM_VECTOR_LEN = 0;\n\nlet cachegetUint8Memory0 = null;\nfunction getUint8Memory0() {\n    if (cachegetUint8Memory0 === null || cachegetUint8Memory0.buffer !== wasm.memory.buffer) {\n        cachegetUint8Memory0 = new Uint8Array(wasm.memory.buffer);\n    }\n    return cachegetUint8Memory0;\n}\n\nlet cachedTextEncoder = new TextEncoder('utf-8');\n\nconst encodeString = (typeof cachedTextEncoder.encodeInto === 'function'\n    ? function (arg, view) {\n    return cachedTextEncoder.encodeInto(arg, view);\n}\n    : function (arg, view) {\n    const buf = cachedTextEncoder.encode(arg);\n    view.set(buf);\n    return {\n        read: arg.length,\n        written: buf.length\n    };\n});\n\nfunction passStringToWasm0(arg, malloc, realloc) {\n\n    if (realloc === undefined) {\n        const buf = cachedTextEncoder.encode(arg);\n        const ptr = malloc(buf.length);\n        getUint8Memory0().subarray(ptr, ptr + buf.length).set(buf);\n        WASM_VECTOR_LEN = buf.length;\n        return ptr;\n    }\n\n    let len = arg.length;\n    let ptr = malloc(len);\n\n    const mem = getUint8Memory0();\n\n    let offset = 0;\n\n    for (; offset < len; offset++) {\n        const code = arg.charCodeAt(offset);\n        if (code > 0x7F) break;\n        mem[ptr + offset] = code;\n    }\n\n    if (offset !== len) {\n        if (offset !== 0) {\n            arg = arg.slice(offset);\n        }\n        ptr = realloc(ptr, len, len = offset + arg.length * 3);\n        const view = getUint8Memory0().subarray(ptr + offset, ptr + len);\n        const ret = encodeString(arg, view);\n\n        offset += ret.written;\n    }\n\n    WASM_VECTOR_LEN = offset;\n    return ptr;\n}\n\nlet cachegetInt32Memory0 = null;\nfunction getInt32Memory0() {\n    if (cachegetInt32Memory0 === null || cachegetInt32Memory0.buffer !== wasm.memory.buffer) {\n        cachegetInt32Memory0 = new Int32Array(wasm.memory.buffer);\n    }\n    return cachegetInt32Memory0;\n}\n\nlet cachedTextDecoder = new TextDecoder('utf-8', { ignoreBOM: true, fatal: true });\n\ncachedTextDecoder.decode();\n\nfunction getStringFromWasm0(ptr, len) {\n    return cachedTextDecoder.decode(getUint8Memory0().subarray(ptr, ptr + len));\n}\n\nfunction _assertClass(instance, klass) {\n    if (!(instance instanceof klass)) {\n        throw new Error(`expected instance of ${klass.name}`);\n    }\n    return instance.ptr;\n}\n\nfunction addHeapObject(obj) {\n    if (heap_next === heap.length) heap.push(heap.length + 1);\n    const idx = heap_next;\n    heap_next = heap[idx];\n\n    heap[idx] = obj;\n    return idx;\n}\n/**\n* @param {ImageData} data\n* @returns {Quad | undefined}\n*/\nexport function find_document(data) {\n    var ret = wasm.find_document(addHeapObject(data));\n    return ret === 0 ? undefined : Quad.__wrap(ret);\n}\n\nfunction isLikeNone(x) {\n    return x === undefined || x === null;\n}\n/**\n* @param {ImageData} data\n* @param {Quad} region\n* @param {number} target_width\n* @param {number | undefined} target_height\n* @returns {ImageData}\n*/\nexport function extract_document(data, region, target_width, target_height) {\n    _assertClass(region, Quad);\n    var ptr0 = region.ptr;\n    region.ptr = 0;\n    var ret = wasm.extract_document(addHeapObject(data), ptr0, target_width, !isLikeNone(target_height), isLikeNone(target_height) ? 0 : target_height);\n    return takeObject(ret);\n}\n\nfunction passArray8ToWasm0(arg, malloc) {\n    const ptr = malloc(arg.length * 1);\n    getUint8Memory0().set(arg, ptr / 1);\n    WASM_VECTOR_LEN = arg.length;\n    return ptr;\n}\n\nlet cachegetUint8ClampedMemory0 = null;\nfunction getUint8ClampedMemory0() {\n    if (cachegetUint8ClampedMemory0 === null || cachegetUint8ClampedMemory0.buffer !== wasm.memory.buffer) {\n        cachegetUint8ClampedMemory0 = new Uint8ClampedArray(wasm.memory.buffer);\n    }\n    return cachegetUint8ClampedMemory0;\n}\n\nfunction getClampedArrayU8FromWasm0(ptr, len) {\n    return getUint8ClampedMemory0().subarray(ptr / 1, ptr / 1 + len);\n}\n\nfunction handleError(f, args) {\n    try {\n        return f.apply(this, args);\n    } catch (e) {\n        wasm.__wbindgen_exn_store(addHeapObject(e));\n    }\n}\n/**\n*/\nexport class Point {\n\n    static __wrap(ptr) {\n        const obj = Object.create(Point.prototype);\n        obj.ptr = ptr;\n\n        return obj;\n    }\n\n    __destroy_into_raw() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_point_free(ptr);\n    }\n    /**\n    */\n    get x() {\n        var ret = wasm.__wbg_get_point_x(this.ptr);\n        return ret;\n    }\n    /**\n    * @param {number} arg0\n    */\n    set x(arg0) {\n        wasm.__wbg_set_point_x(this.ptr, arg0);\n    }\n    /**\n    */\n    get y() {\n        var ret = wasm.__wbg_get_point_y(this.ptr);\n        return ret;\n    }\n    /**\n    * @param {number} arg0\n    */\n    set y(arg0) {\n        wasm.__wbg_set_point_y(this.ptr, arg0);\n    }\n}\n/**\n*/\nexport class Quad {\n\n    static __wrap(ptr) {\n        const obj = Object.create(Quad.prototype);\n        obj.ptr = ptr;\n\n        return obj;\n    }\n\n    __destroy_into_raw() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_quad_free(ptr);\n    }\n    /**\n    */\n    get a() {\n        var ret = wasm.__wbg_get_quad_a(this.ptr);\n        return Point.__wrap(ret);\n    }\n    /**\n    * @param {Point} arg0\n    */\n    set a(arg0) {\n        _assertClass(arg0, Point);\n        var ptr0 = arg0.ptr;\n        arg0.ptr = 0;\n        wasm.__wbg_set_quad_a(this.ptr, ptr0);\n    }\n    /**\n    */\n    get b() {\n        var ret = wasm.__wbg_get_quad_b(this.ptr);\n        return Point.__wrap(ret);\n    }\n    /**\n    * @param {Point} arg0\n    */\n    set b(arg0) {\n        _assertClass(arg0, Point);\n        var ptr0 = arg0.ptr;\n        arg0.ptr = 0;\n        wasm.__wbg_set_quad_b(this.ptr, ptr0);\n    }\n    /**\n    */\n    get c() {\n        var ret = wasm.__wbg_get_quad_c(this.ptr);\n        return Point.__wrap(ret);\n    }\n    /**\n    * @param {Point} arg0\n    */\n    set c(arg0) {\n        _assertClass(arg0, Point);\n        var ptr0 = arg0.ptr;\n        arg0.ptr = 0;\n        wasm.__wbg_set_quad_c(this.ptr, ptr0);\n    }\n    /**\n    */\n    get d() {\n        var ret = wasm.__wbg_get_quad_d(this.ptr);\n        return Point.__wrap(ret);\n    }\n    /**\n    * @param {Point} arg0\n    */\n    set d(arg0) {\n        _assertClass(arg0, Point);\n        var ptr0 = arg0.ptr;\n        arg0.ptr = 0;\n        wasm.__wbg_set_quad_d(this.ptr, ptr0);\n    }\n    /**\n    * @param {number} ax\n    * @param {number} ay\n    * @param {number} bx\n    * @param {number} by\n    * @param {number} cx\n    * @param {number} cy\n    * @param {number} dx\n    * @param {number} dy\n    */\n    constructor(ax, ay, bx, by, cx, cy, dx, dy) {\n        var ret = wasm.quad_new(ax, ay, bx, by, cx, cy, dx, dy);\n        return Quad.__wrap(ret);\n    }\n}\n\nasync function load(module, imports) {\n    if (typeof Response === 'function' && module instanceof Response) {\n        if (typeof WebAssembly.instantiateStreaming === 'function') {\n            try {\n                return await WebAssembly.instantiateStreaming(module, imports);\n\n            } catch (e) {\n                if (module.headers.get('Content-Type') != 'application/wasm') {\n                    console.warn(\"`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\\n\", e);\n\n                } else {\n                    throw e;\n                }\n            }\n        }\n\n        const bytes = await module.arrayBuffer();\n        return await WebAssembly.instantiate(bytes, imports);\n\n    } else {\n        const instance = await WebAssembly.instantiate(module, imports);\n\n        if (instance instanceof WebAssembly.Instance) {\n            return { instance, module };\n\n        } else {\n            return instance;\n        }\n    }\n}\n\nasync function init(input) {\n    if (typeof input === 'undefined') {\n        input = new URL('scanner_bg.wasm', import.meta.url);\n    }\n    const imports = {};\n    imports.wbg = {};\n    imports.wbg.__wbg_width_16bd64d09cbf5661 = function(arg0) {\n        var ret = getObject(arg0).width;\n        return ret;\n    };\n    imports.wbg.__wbg_height_368bb86c37d51bc9 = function(arg0) {\n        var ret = getObject(arg0).height;\n        return ret;\n    };\n    imports.wbg.__wbg_data_1ae7496c58caf755 = function(arg0, arg1) {\n        var ret = getObject(arg1).data;\n        var ptr0 = passArray8ToWasm0(ret, wasm.__wbindgen_malloc);\n        var len0 = WASM_VECTOR_LEN;\n        getInt32Memory0()[arg0 / 4 + 1] = len0;\n        getInt32Memory0()[arg0 / 4 + 0] = ptr0;\n    };\n    imports.wbg.__wbindgen_object_drop_ref = function(arg0) {\n        takeObject(arg0);\n    };\n    imports.wbg.__wbg_newwithu8clampedarrayandsh_1b8c6e1bede43657 = function() { return handleError(function (arg0, arg1, arg2, arg3) {\n        var ret = new ImageData(getClampedArrayU8FromWasm0(arg0, arg1), arg2 >>> 0, arg3 >>> 0);\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbindgen_debug_string = function(arg0, arg1) {\n        var ret = debugString(getObject(arg1));\n        var ptr0 = passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        var len0 = WASM_VECTOR_LEN;\n        getInt32Memory0()[arg0 / 4 + 1] = len0;\n        getInt32Memory0()[arg0 / 4 + 0] = ptr0;\n    };\n    imports.wbg.__wbindgen_throw = function(arg0, arg1) {\n        throw new Error(getStringFromWasm0(arg0, arg1));\n    };\n\n    if (typeof input === 'string' || (typeof Request === 'function' && input instanceof Request) || (typeof URL === 'function' && input instanceof URL)) {\n        input = fetch(input);\n    }\n\n\n\n    const { instance, module } = await load(await input, imports);\n\n    wasm = instance.exports;\n    init.__wbindgen_wasm_module = module;\n\n    return wasm;\n}\n\nexport default init;\n\n","\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"hSxXa\\\":\\\"process.4bfe4464.js\\\",\\\"iOEoq\\\":\\\"scanner_bg.dd445e70.wasm\\\"}\"));","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","module.exports = require('./helpers/bundle-url').getBundleURL('hSxXa') + require('./helpers/bundle-manifest').resolve(\"iOEoq\");","import init, { find_document, extract_document, Quad as WasmQuad } from '../../pkg/scanner';\n\nexport type Point = {\n  x: number;\n  y: number;\n}\n\nexport type Quad = {\n  a: Point;\n  b: Point;\n  c: Point;\n  d: Point;\n};\n\nexport type Messages = {\n  'find-document': [{\n    data: ImageData;\n  }, Quad | undefined];\n  'extract-document': [{\n    data: ImageData;\n    region: Quad;\n    targetWidth: number;\n    targetHeight?: number;\n  }, ImageData];\n  'get-data': [{\n    bitmap: ImageBitmap;\n  }, ImageData];\n};\n\nexport type Message = {\n  [T in keyof Messages]: {\n    type: T;\n  } & Messages[T][0];\n}[keyof Messages];\n\nconst handle = <T extends Message>(message: T): { result: Messages[T['type']][1]; transfer?: Transferable[] } => {\n  if (message.type == 'find-document') {\n    // const ts = performance.now();\n    const quad = find_document(message.data);\n    // console.log('find_document:', (performance.now() - ts) + 'ms')\n    return {\n      result: quad && {\n        a: {\n          x: quad.a.x,\n          y: quad.a.y\n        },\n        b: {\n          x: quad.b.x,\n          y: quad.b.y\n        },\n        c: {\n          x: quad.c.x,\n          y: quad.c.y\n        },\n        d: {\n          x: quad.d.x,\n          y: quad.d.y\n        }\n      }\n    };\n  } else if (message.type == 'extract-document') {\n    const { a, b, c, d } = message.region;\n    const quad = new WasmQuad(a.x, a.y, b.x, b.y, c.x, c.y, d.x, d.y);\n    const result = extract_document(message.data, quad, message.targetWidth, message.targetHeight);\n    return { result, transfer: [result.data.buffer] };\n  } else if (message.type == 'get-data') {\n    const { width, height } = message.bitmap;\n    const canvas = new OffscreenCanvas(width, height);\n    const ctx = canvas.getContext('2d')!;\n    ctx.drawImage(message.bitmap, 0, 0);\n    const result = ctx.getImageData(0, 0, width, height)\n    return { result, transfer: [result.data.buffer] };\n  } else {\n    throw new TypeError('invalid message');\n  }\n}\n\nlet load = init().catch(() => {});\n\nonmessage = async evt => {\n  await load;\n  const { msg, ...data } = evt.data;\n  try {\n    const { result, transfer } = handle(msg as Message);\n    postMessage({ result, ...data }, transfer || []);\n  } catch (err) {\n    if (!(err instanceof Error)) {\n      err = new Error(`Error in process worker: ${err}`);\n    }\n    postMessage({\n      error: {\n        message: (err as Error).message,\n        stack: (err as Error).stack,\n        name: (err as Error).name\n      },\n      ...data\n    });\n  }\n};"],"names":["$1afd3d37e3b8bf52$var$wasm","$057f5dc0dfc67547$export$6503ec6e8aabbaf","$057f5dc0dfc67547$export$f7ad0328861e2f03","$057f5dc0dfc67547$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$1afd3d37e3b8bf52$var$heap","Array","fill","undefined","$1afd3d37e3b8bf52$var$getObject","idx","push","$1afd3d37e3b8bf52$var$heap_next","$1afd3d37e3b8bf52$var$takeObject","ret","$1afd3d37e3b8bf52$var$dropObject","$1afd3d37e3b8bf52$var$debugString","val","type","description","name","isArray","debug","builtInMatches","exec","toString","call","className","stringify","_","message","stack","$1afd3d37e3b8bf52$var$WASM_VECTOR_LEN","$1afd3d37e3b8bf52$var$cachegetUint8Memory0","$1afd3d37e3b8bf52$var$getUint8Memory0","buffer","memory","Uint8Array","$1afd3d37e3b8bf52$var$cachedTextEncoder","TextEncoder","$1afd3d37e3b8bf52$var$encodeString","encodeInto","arg","view","buf","encode","set","read","written","$1afd3d37e3b8bf52$var$cachegetInt32Memory0","$1afd3d37e3b8bf52$var$getInt32Memory0","Int32Array","$1afd3d37e3b8bf52$var$cachedTextDecoder","TextDecoder","ignoreBOM","fatal","$1afd3d37e3b8bf52$var$_assertClass","instance","klass","ptr","$1afd3d37e3b8bf52$var$addHeapObject","obj","$1afd3d37e3b8bf52$var$isLikeNone","x","decode","$1afd3d37e3b8bf52$var$cachegetUint8ClampedMemory0","$1afd3d37e3b8bf52$var$getClampedArrayU8FromWasm0","len","Uint8ClampedArray","subarray","$1afd3d37e3b8bf52$var$handleError","f","args","apply","this","e","__wbindgen_exn_store","$1afd3d37e3b8bf52$export$baf26146a414f24a","create","prototype","__destroy_into_raw","free","__wbg_point_free","__wbg_get_point_x","arg06","__wbg_set_point_x","y","__wbg_get_point_y","arg01","__wbg_set_point_y","$1afd3d37e3b8bf52$export$7005c9eb6671414d","ptr1","__wbg_quad_free","a","__wbg_get_quad_a","__wrap","arg02","ptr0","__wbg_set_quad_a","b","__wbg_get_quad_b","arg03","__wbg_set_quad_b","c","__wbg_get_quad_c","arg04","__wbg_set_quad_c","d","__wbg_get_quad_d","arg05","__wbg_set_quad_d","constructor","ax","ay","bx","by","cx","cy","dx","dy","quad_new","$7a2e42261412c0b6$export$bdfd709ae4826697","$7a2e42261412c0b6$var$bundleURL","$7a2e42261412c0b6$var$getBaseURL","url","replace","value","err","matches","match","$7a2e42261412c0b6$var$getBundleURL","$8ca0511d19b57ab3$exports","getBundleURL","resolve","$1afd3d37e3b8bf52$export$2e2bcd8739ae039","$1afd3d37e3b8bf52$var$init","input","URL","imports","wbg","__wbg_width_16bd64d09cbf5661","arg0","width","__wbg_height_368bb86c37d51bc9","height","__wbg_data_1ae7496c58caf755","arg1","malloc","$1afd3d37e3b8bf52$var$passArray8ToWasm0","data","__wbindgen_malloc","len0","__wbindgen_object_drop_ref","__wbg_newwithu8clampedarrayandsh_1b8c6e1bede43657","arg2","arg3","ImageData","arguments","__wbindgen_debug_string","realloc","mem","offset","code","charCodeAt","slice","$1afd3d37e3b8bf52$var$passStringToWasm0","__wbindgen_realloc","__wbindgen_throw","Request","fetch","module","Response","WebAssembly","instantiateStreaming","headers","get","console","warn","bytes","arrayBuffer","instantiate","Instance","$1afd3d37e3b8bf52$var$load","exports","__wbindgen_wasm_module","$47812d91a3ea74e7$var$handle","quad","find_document","result","region","target_width","target_height","extract_document","$1afd3d37e3b8bf52$export$e71c94bb735e34f6","targetWidth","targetHeight","transfer","bitmap","ctx","OffscreenCanvas","getContext","drawImage","getImageData","TypeError","$47812d91a3ea74e7$var$load","catch","onmessage","async","evt","msg","postMessage","error"],"version":3,"file":"process.4bfe4464.js.map"}