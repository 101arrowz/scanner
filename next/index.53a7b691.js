function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},i={},o=n.parcelRequireed96;let a;null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in i){var t=i[e];delete i[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){i[e]=t},n.parcelRequireed96=o),o.register("bXuNP",(function(t,n){var r,i;e(t.exports,"register",(()=>r),(e=>r=e)),e(t.exports,"resolve",(()=>i),(e=>i=e));var o={};r=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)o[t[n]]=e[t[n]]},i=function(e){var t=o[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),o("bXuNP").register(JSON.parse('{"d3X8m":"index.53a7b691.js","8plmg":"scanner_bg.dd445e70.wasm","hSxXa":"process.4bfe4464.js","9Zhps":"flash.7ae5cfb8.svg","aPRWI":"flash-off.f95884b2.svg","iiC8o":"hd.0cfe4ff9.svg","8qWZp":"sd.25c2f123.svg","HMBE2":"service.js"}'));const s=new Array(32).fill(void 0);function c(e){return s[e]}s.push(void 0,null,!0,!1);let d=s.length;function l(e){const t=c(e);return function(e){e<36||(s[e]=d,d=e)}(e),t}function h(e){const t=typeof e;if("number"==t||"boolean"==t||null==e)return`${e}`;if("string"==t)return`"${e}"`;if("symbol"==t){const t=e.description;return null==t?"Symbol":`Symbol(${t})`}if("function"==t){const t=e.name;return"string"==typeof t&&t.length>0?`Function(${t})`:"Function"}if(Array.isArray(e)){const t=e.length;let n="[";t>0&&(n+=h(e[0]));for(let r=1;r<t;r++)n+=", "+h(e[r]);return n+="]",n}const n=/\[object ([^\]]+)\]/.exec(toString.call(e));let r;if(!(n.length>1))return toString.call(e);if(r=n[1],"Object"==r)try{return"Object("+JSON.stringify(e)+")"}catch(e){return"Object"}return e instanceof Error?`${e.name}: ${e.message}\n${e.stack}`:r}let u=0,g=null;function m(){return null!==g&&g.buffer===a.memory.buffer||(g=new Uint8Array(a.memory.buffer)),g}let p=new TextEncoder("utf-8");const w="function"==typeof p.encodeInto?function(e,t){return p.encodeInto(e,t)}:function(e,t){const n=p.encode(e);return t.set(n),{read:e.length,written:n.length}};let f=null;function y(){return null!==f&&f.buffer===a.memory.buffer||(f=new Int32Array(a.memory.buffer)),f}let v=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});function b(e,t){if(!(e instanceof t))throw new Error(`expected instance of ${t.name}`);return e.ptr}function _(e){d===s.length&&s.push(s.length+1);const t=d;return d=s[t],s[t]=e,t}function E(e){return null==e}v.decode();let x=null;function I(e,t){return(null!==x&&x.buffer===a.memory.buffer||(x=new Uint8ClampedArray(a.memory.buffer)),x).subarray(e/1,e/1+t)}function C(e,t){try{return e.apply(this,t)}catch(e){a.__wbindgen_exn_store(_(e))}}class k{static __wrap(e){const t=Object.create(k.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();a.__wbg_point_free(e)}get x(){return a.__wbg_get_point_x(this.ptr)}set x(e){a.__wbg_set_point_x(this.ptr,e)}get y(){return a.__wbg_get_point_y(this.ptr)}set y(e){a.__wbg_set_point_y(this.ptr,e)}}class L{static __wrap(e){const t=Object.create(L.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();a.__wbg_quad_free(e)}get a(){var e=a.__wbg_get_quad_a(this.ptr);return k.__wrap(e)}set a(e){b(e,k);var t=e.ptr;e.ptr=0,a.__wbg_set_quad_a(this.ptr,t)}get b(){var e=a.__wbg_get_quad_b(this.ptr);return k.__wrap(e)}set b(e){b(e,k);var t=e.ptr;e.ptr=0,a.__wbg_set_quad_b(this.ptr,t)}get c(){var e=a.__wbg_get_quad_c(this.ptr);return k.__wrap(e)}set c(e){b(e,k);var t=e.ptr;e.ptr=0,a.__wbg_set_quad_c(this.ptr,t)}get d(){var e=a.__wbg_get_quad_d(this.ptr);return k.__wrap(e)}set d(e){b(e,k);var t=e.ptr;e.ptr=0,a.__wbg_set_quad_d(this.ptr,t)}constructor(e,t,n,r,i,o,s,c){var d=a.quad_new(e,t,n,r,i,o,s,c);return L.__wrap(d)}}var B;o.register("kPq84",(function(t,n){var r,i;e(t.exports,"getBundleURL",(()=>r),(e=>r=e)),e(t.exports,"getOrigin",(()=>i),(e=>i=e));var o={};function a(e){return(""+e).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}r=function(e){var t=o[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(e)return a(e[2])}return"/"}(),o[e]=t),t},i=function(e){var t=(""+e).match(/(https?|file|ftp):\/\/[^/]+/);if(!t)throw new Error("Origin not found");return t[0]}})),B=o("kPq84").getBundleURL("d3X8m")+o("bXuNP").resolve("8plmg");var S=async function e(t){void 0===t&&(t=new URL(B));const n={wbg:{}};n.wbg.__wbg_width_16bd64d09cbf5661=function(e){return c(e).width},n.wbg.__wbg_height_368bb86c37d51bc9=function(e){return c(e).height},n.wbg.__wbg_data_1ae7496c58caf755=function(e,t){var n=function(e,t){const n=t(1*e.length);return m().set(e,n/1),u=e.length,n}(c(t).data,a.__wbindgen_malloc),r=u;y()[e/4+1]=r,y()[e/4+0]=n},n.wbg.__wbindgen_object_drop_ref=function(e){l(e)},n.wbg.__wbg_newwithu8clampedarrayandsh_1b8c6e1bede43657=function(){return C((function(e,t,n,r){return _(new ImageData(I(e,t),n>>>0,r>>>0))}),arguments)},n.wbg.__wbindgen_debug_string=function(e,t){var n=function(e,t,n){if(void 0===n){const n=p.encode(e),r=t(n.length);return m().subarray(r,r+n.length).set(n),u=n.length,r}let r=e.length,i=t(r);const o=m();let a=0;for(;a<r;a++){const t=e.charCodeAt(a);if(t>127)break;o[i+a]=t}if(a!==r){0!==a&&(e=e.slice(a)),i=n(i,r,r=a+3*e.length);const t=m().subarray(i+a,i+r);a+=w(e,t).written}return u=a,i}(h(c(t)),a.__wbindgen_malloc,a.__wbindgen_realloc),r=u;y()[e/4+1]=r,y()[e/4+0]=n},n.wbg.__wbindgen_throw=function(e,t){throw new Error((n=e,r=t,v.decode(m().subarray(n,n+r))));var n,r},("string"==typeof t||"function"==typeof Request&&t instanceof Request||"function"==typeof URL&&t instanceof URL)&&(t=fetch(t));const{instance:r,module:i}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"==e.headers.get("Content-Type"))throw t;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t)}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await t,n);return a=r.exports,e.__wbindgen_wasm_module=i,a};const R=e=>{if("find-document"==e.type){const r=(t=e.data,0===(n=a.find_document(_(t)))?void 0:L.__wrap(n));return{result:r&&{a:{x:r.a.x,y:r.a.y},b:{x:r.b.x,y:r.b.y},c:{x:r.c.x,y:r.c.y},d:{x:r.d.x,y:r.d.y}}}}if("extract-document"==e.type){const{a:t,b:n,c:r,d:i}=e.region,o=new L(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y),s=function(e,t,n,r){b(t,L);var i=t.ptr;return t.ptr=0,l(a.extract_document(_(e),i,n,!E(r),E(r)?0:r))}(e.data,o,e.targetWidth,e.targetHeight);return{result:s,transfer:[s.data.buffer]}}if("get-data"==e.type){const{width:t,height:n}=e.bitmap,r=new OffscreenCanvas(t,n).getContext("2d");r.drawImage(e.bitmap,0,0);const i=r.getImageData(0,0,t,n);return{result:i,transfer:[i.data.buffer]}}throw new TypeError("invalid message");var t,n};let P=S().catch((()=>{}));onmessage=async e=>{await P;const{msg:t,...n}=e.data;try{const{result:e,transfer:r}=R(t);postMessage({result:e,...n},r||[])}catch(e){e instanceof Error||(e=new Error(`Error in process worker: ${e}`)),postMessage({error:{message:e.message,stack:e.stack,name:e.name},...n})}};var O,M;M=function(e,t,n){if(t===self.location.origin)return e;var r=n?"import "+JSON.stringify(e)+";":"importScripts("+JSON.stringify(e)+");";return URL.createObjectURL(new Blob([r],{type:"application/javascript"}))};var H=o("kPq84");let W=H.getBundleURL("d3X8m")+o("bXuNP").resolve("hSxXa");O=M(W,H.getOrigin(W),!0);const T=()=>new Worker(O,{type:"module"}),U=[];if(navigator.hardwareConcurrency)for(let e=1;e<navigator.hardwareConcurrency;++e)U.push(T());let D=0;const q=async(e,t)=>new Promise(((n,r)=>{const i=U.pop()||T();let o=D++;const a=e=>{const{id:t,error:s,result:c}=e.data;if(t==o){if(s){let e=new Error(s.message);e.stack=s.stack,e.name=s.name,r(e)}else n(c);(e=>{U.push(e)})(i),i.removeEventListener("message",a)}};i.addEventListener("message",a),i.postMessage({id:o,msg:e},t||[])}));function j(e,t){return q({type:"find-document",data:e},t?[e.data.buffer]:[])}const A=Blob.prototype.arrayBuffer||function(){return new Promise(((e,t)=>{const n=new FileReader;n.onload=()=>{e(n.result)},n.onerror=()=>{t(n.error)},n.readAsArrayBuffer(this)}))},X=async e=>{const t=[];let n=0;const r=[],i=e=>{t.push(e),n+=e.length},o=e=>{i(" "),i(e)},a=e=>{let t=0;for(const n of e)t+=n.length;const n=new Uint8Array(t);t=0;for(const r of e){if("string"==typeof r)for(let e=0;e<r.length;++e)n[e+t]=r.charCodeAt(e);else n.set(r,t);t+=r.length}return n},s=e=>{i("%"+e+"\n")},c=e=>{o(e.toString())},d=e=>{o("/"+e)},l=e=>{o("["),e(),o("]")},h=e=>{o("<<");for(const t in e)d(t),e[t]();o(">>")},u=(e,t)=>{h(e),o("stream\n"),i(t),i("endstream")},g=e=>(i(" "),i(r.push(n)+" 0 obj"),e(),o("endobj"),r.length),m=e=>{o(e+" 0 R")};s("PDF-1.4"),s("úã");const p=await Promise.all(e.map((async e=>{const t=document.createElement("canvas");t.width=e.width,t.height=e.height,t.getContext("2d").putImageData(e,0,0);const n=await new Promise((e=>t.toBlob(e,"image/jpeg"))),i=new Uint8Array(await A.call(n)),o=g((()=>{u({Type(){d("XObject")},Subtype(){d("Image")},Width(){c(e.width)},Height(){c(e.height)},ColorSpace(){d("DeviceRGB")},BitsPerComponent(){c(8)},Filter(){d("DCTDecode")},Length(){c(i.length)}},i)})),s=792*e.width/e.height,p=g((()=>{const e=`${s} 0 0 792 0 0 cm /I Do`;u({Length(){c(e.length)}},a([e]))}));return g((()=>{h({Type(){d("Page")},Parent(){m(r.length+1)},Resources(){h({XObject(){h({I(){m(o)}})}})},Contents(){m(p)},MediaBox(){l((()=>{c(0),c(0),c(s),c(792)}))}})}))}))),w=g((()=>{h({Type(){d("Pages")},Kids(){l((()=>{for(const e of p)m(e)}))},Count(){c(p.length)}})})),f=g((()=>{h({Type(){d("Catalog")},Pages(){m(w)}})}));i("\n");const y=n;i("xref\n0 "+(r.length+1)+"\n0000000000 65535 f \n");for(const e of r)i(e.toString().padStart(10,"0")+" 00000 n \n");return i("trailer"),h({Size(){c(r.length+1)},Root(){m(f)}}),i("\nstartxref\n"+y+"\n%%EOF"),a(t)},F=document.createElement("canvas"),N=F.getContext("2d"),$=async(e,t)=>F.transferControlToOffscreen?function(e,t){return q({type:"get-data",bitmap:e},t?[e]:[])}(e instanceof ImageBitmap?e:await createImageBitmap(e),t):(F.width=e.width,F.height=e.height,N.drawImage(e,0,0),N.getImageData(0,0,e.width,e.height));var J;J=o("kPq84").getBundleURL("d3X8m")+o("bXuNP").resolve("9Zhps");var Y;Y=o("kPq84").getBundleURL("d3X8m")+o("bXuNP").resolve("aPRWI");var Z;Z=o("kPq84").getBundleURL("d3X8m")+o("bXuNP").resolve("iiC8o");var z;z=o("kPq84").getBundleURL("d3X8m")+o("bXuNP").resolve("8qWZp");let V=window.ImageCapture;void 0===V&&(V=class{constructor(e){if("video"!==e.kind)throw new DOMException("NotSupportedError");this._videoStreamTrack=e,"readyState"in this._videoStreamTrack||(this._videoStreamTrack.readyState="live"),this._previewStream=new MediaStream([e]),this.videoElement=document.createElement("video"),this.videoElementPlaying=new Promise((e=>{this.videoElement.addEventListener("playing",e)})),HTMLMediaElement?this.videoElement.srcObject=this._previewStream:this.videoElement.src=URL.createObjectURL(this._previewStream),this.videoElement.muted=!0,this.videoElement.setAttribute("playsinline",""),this.videoElement.play(),this.canvasElement=document.createElement("canvas"),this.canvas2dContext=this.canvasElement.getContext("2d")}get videoStreamTrack(){return this._videoStreamTrack}getPhotoCapabilities(){return new Promise((function(e,t){const n={current:0,min:0,max:0};e({exposureCompensation:n,exposureMode:"none",fillLightMode:"none",focusMode:"none",imageHeight:n,imageWidth:n,iso:n,redEyeReduction:!1,whiteBalanceMode:"none",zoom:n}),t(new DOMException("OperationError"))}))}setOptions(e={}){return new Promise((function(e,t){}))}takePhoto(){const e=this;return new Promise((function(t,n){if("live"!==e._videoStreamTrack.readyState)return n(new DOMException("InvalidStateError"));e.videoElementPlaying.then((()=>{try{e.canvasElement.width=e.videoElement.videoWidth,e.canvasElement.height=e.videoElement.videoHeight,e.canvas2dContext.drawImage(e.videoElement,0,0),e.canvasElement.toBlob(t)}catch(e){n(new DOMException("UnknownError"))}}))}))}grabFrame(){const e=this;return new Promise((function(t,n){if("live"!==e._videoStreamTrack.readyState)return n(new DOMException("InvalidStateError"));e.videoElementPlaying.then((()=>{try{e.canvasElement.width=e.videoElement.videoWidth,e.canvasElement.height=e.videoElement.videoHeight,e.canvas2dContext.drawImage(e.videoElement,0,0),t(window.createImageBitmap(e.canvasElement))}catch(e){n(new DOMException("UnknownError"))}}))}))}}),window.ImageCapture=V;const G=document.getElementById("root"),K=document.getElementById("modal"),Q=document.getElementById("captures"),ee=document.getElementById("preview"),te=document.getElementById("preview-crop"),ne=document.getElementById("preview-doc"),re=document.getElementById("bottom-wrapper"),ie=document.getElementById("top-wrapper"),oe=document.getElementById("camera-select-wrapper"),ae=document.getElementById("camera-select"),se=document.getElementById("quality-wrapper"),ce=document.getElementById("quality"),de=document.getElementById("quality-img"),le=document.getElementById("github-wrapper"),he=document.getElementById("flash-wrapper"),ue=document.getElementById("flash"),ge=document.getElementById("flash-img"),me=document.getElementById("upload-wrapper"),pe=document.getElementById("upload"),we=document.getElementById("shutter"),fe=document.getElementById("done-wrapper"),ye=document.getElementById("done"),ve=document.getElementById("modal-bottom-wrapper"),be=document.getElementById("modal-cancel-wrapper"),_e=document.getElementById("modal-cancel"),Ee=document.getElementById("modal-done-wrapper"),xe=document.getElementById("modal-done");let Ie,Ce={};const ke=[],Le=[],Be=e=>(Le.push(e),()=>{Le.splice(Le.indexOf(e),1)}),Se=()=>{for(const e of Le)e()};let Re=-1;window.addEventListener("resize",(()=>{clearTimeout(Re),Re=setTimeout(Se,250)}),{passive:!0});const Pe=(e,t,n)=>{const r=Math.min(window.innerWidth,window.innerHeight);e.style.top=t.y*n-.015*r+"px",e.style.left=t.x*n-.015*r+"px"},Oe=(e,t,n)=>{const r=document.createElement("div");return r.style.height="4px",r.style.backgroundColor="red",r.style.position="absolute",r.style.transformOrigin="center left",Me(r,e,t,n),r},Me=(e,t,n,r)=>{e.style.width=Math.hypot(t.x-n.x,t.y-n.y)*r+"px",e.style.top=t.y*r+"px",e.style.left=t.x*r+"px",e.style.transform=`rotate(${Math.atan2(n.y-t.y,n.x-t.x)}rad)`},He=async e=>{let t,n;if(e instanceof Blob){const r=await(async e=>{const t=document.createElement("img"),n=new Promise(((e,n)=>{t.onload=()=>{e()},t.onerror=e=>{n(e)}}));return t.src=URL.createObjectURL(e),await n,URL.revokeObjectURL(t.src),t})(e);t=r,n=await $(r)}else{const r=document.createElement("canvas");r.width=e.width,r.height=e.height,r.getContext("2d").drawImage(e,0,0),t=r,n=await $(e,!0)}const r=await j(n)||{a:{x:0,y:n.height},b:{x:0,y:0},c:{x:n.width,y:0},d:{x:n.width,y:n.height}},i=e=>{e.x<0?e.x=0:e.x>n.width&&(e.x=n.width),e.y<0?e.y=0:e.y>n.height&&(e.y=n.height)};i(r.a),i(r.b),i(r.c),i(r.d);const o=document.createElement("div");o.style.display="flex",o.style.justifyContent="center",o.style.alignItems="center",o.style.overflow="hidden";const a=document.createElement("div");a.style.position="relative",a.appendChild(t),o.appendChild(a),K.style.display="flex";const s=Math.max(n.width,n.height)/Math.min(n.width,n.height);let c=0,d=0,l=0,h=!1,u=[];const g=(e,n)=>{const r=((e,t)=>{const n=document.createElement("div"),r=Math.min(window.innerWidth,window.innerHeight);return n.style.width=.03*r+"px",n.style.height=.03*r+"px",n.style.borderRadius=.015*r+"px",n.style.backgroundColor="black",n.style.position="absolute",Pe(n,e,t),n})(e,c);let i=!1;const o=(n,o,d)=>{n.target==r||n.target==t&&Math.hypot(o-e.x*c,d-e.y*c)<.2*Math.min(window.innerWidth,window.innerHeight)?(n.stopImmediatePropagation(),i=!0,s(o,d)):r.parentElement!=a&&(a.removeEventListener("mousedown",u),a.removeEventListener("touchstart",g),a.removeEventListener("mousemove",m),a.removeEventListener("touchmove",p),a.removeEventListener("mouseup",h),a.removeEventListener("touchend",h))},s=(t,i)=>{e.x=t/c,e.y=i/c,Pe(r,e,c),n()},h=()=>{i=!1},u=e=>{o(e,e.clientX-d,e.clientY-l)};a.addEventListener("mousedown",u);const g=e=>{const t=e.targetTouches[0];o(e,t.clientX-d,t.clientY-l)};a.addEventListener("touchstart",g);const m=e=>{i&&(e.preventDefault(),s(e.clientX-d,e.clientY-l))};a.addEventListener("mousemove",m);const p=e=>{if(i){const t=e.targetTouches[0];e.preventDefault(),s(t.clientX-d,t.clientY-l)}};return a.addEventListener("touchmove",p),a.addEventListener("mouseup",h),a.addEventListener("touchend",h),r},m=()=>{const{width:e,height:i}=Te(s,.925),m=e+"px",p=i+"px";h=We(s),h?(t.style.width="",t.style.height=p,c=window.innerHeight/n.height):(t.style.width=m,t.style.height="",c=window.innerWidth/n.width),o.style.width=o.style.minWidth=m,o.style.height=o.style.minHeight=p,queueMicrotask((()=>{const{left:e,top:t}=a.getBoundingClientRect();d=e,l=t,(()=>{for(const e of u)a.removeChild(e);const e=Oe(r.a,r.b,c),t=Oe(r.b,r.c,c),n=Oe(r.c,r.d,c),i=Oe(r.d,r.a,c);u=[a.appendChild(e),a.appendChild(t),a.appendChild(n),a.appendChild(i),a.appendChild(g(r.a,(()=>{Me(i,r.d,r.a,c),Me(e,r.a,r.b,c)}))),a.appendChild(g(r.b,(()=>{Me(e,r.a,r.b,c),Me(t,r.b,r.c,c)}))),a.appendChild(g(r.c,(()=>{Me(t,r.b,r.c,c),Me(n,r.c,r.d,c)}))),a.appendChild(g(r.d,(()=>{Me(n,r.c,r.d,c),Me(i,r.d,r.a,c)})))]})()}))};m(),Q.appendChild(o);const p=Be(m);return new Promise((e=>{const t=()=>{ke.push({page:{data:n,quad:r}}),a()},i=()=>{a()};_e.addEventListener("click",i),xe.addEventListener("click",t);const a=()=>{xe.removeEventListener("click",t),_e.removeEventListener("click",i),K.style.display="none",Q.removeChild(o),p(),e()}}))},We=e=>window.innerWidth>window.innerHeight*e,Te=(e,t)=>{const n=We(e),r=n?window.innerHeight:Math.floor(Math.min(window.innerWidth*e,window.innerHeight*t));return{width:n?Math.floor(Math.min(window.innerHeight*e,window.innerWidth*t)):window.innerWidth,height:r}},Ue=[ie,re,ve],De=[he,se,le,oe],qe=[fe,me,be,Ee],je=De.concat(qe,we),Ae=async e=>{const n=await(e=>{const t={width:1e5,height:1e5,facingMode:"environment"};if(e){if(Ce[e])return Ce[e];t.deviceId={exact:e}}else if(Ie)return Ie;const n=navigator.mediaDevices.getUserMedia({video:t}).then((e=>{const t=e.getVideoTracks()[0].getSettings();for(const t of e.getTracks())t.stop();return{width:Math.max(t.width,t.height),height:Math.min(t.width,t.height),deviceId:t.deviceId}}));return e?Ce[e]=n:Ie=n.then((e=>(Ce[e.deviceId]=n,e))),n})(e);let r=n.width/n.height;const i=We(r),{width:o,height:a}=Te(r,.84),s=a+"px",c=o+"px";te.style.width=te.style.minWidth=c,te.style.height=te.style.minHeight=s,K.style.width=G.style.width=window.innerWidth+"px",K.style.height=G.style.height=window.innerHeight+"px";for(const e of Ue)i?(e.style.flexDirection=e==ie?"column-reverse":"column",e.style.height=window.innerHeight+"px",e.style.width=""):(e.style.flexDirection="row",e.style.height="",e.style.width=window.innerWidth+"px");for(const e of De)e.style.width=e.style.height=.03*(i?window.innerWidth:window.innerHeight)+"px";for(const e of qe)e.style.width=e.style.height=.035*(i?window.innerWidth:window.innerHeight)+"px";for(const e of je)e.style.margin=.02*(i?window.innerWidth:window.innerHeight)+"px";we.style.width=we.style.height=.05*(i?window.innerWidth:window.innerHeight)+"px",i?(ee.style.height=s,ee.style.width="",K.style.flexDirection=G.style.flexDirection="row"):(ee.style.height="",ee.style.width=c,K.style.flexDirection=G.style.flexDirection="column");const d={width:n.width,height:n.height,deviceId:{exact:n.deviceId}},l=await navigator.mediaDevices.getUserMedia({video:d}),h=l.getVideoTracks()[0],u=h.getCapabilities();he.style.display=u.torch?"":"none",ee.srcObject=l;let g=[];let m=()=>{};const p=()=>{const e=i?window.innerHeight/ee.videoHeight:window.innerWidth/ee.videoWidth,t=async()=>{let n=await j(await $(await f.grabFrame()),!0);(()=>{for(const e of g)ne.removeChild(e);g.length=0})(),-1!=b&&(n&&(g=[ne.appendChild(Oe(n.a,n.b,e)),ne.appendChild(Oe(n.b,n.c,e)),ne.appendChild(Oe(n.c,n.d,e)),ne.appendChild(Oe(n.d,n.a,e))]),b=setTimeout(t,0))};m=()=>{b=setTimeout(t,0)},m()},w=()=>{clearTimeout(b),b=-1};ee.addEventListener("loadedmetadata",p);const f=new ImageCapture(h);let y="[object ImageCapture]"==Object.prototype.toString.call(f);se.style.display=y?"":"none",de.src=t(Z);const v=()=>{y=!y,de.src=t(y?Z:z)};ce.addEventListener("click",v);let b=-1;let _=!1;const E=async()=>{if(!_){we.style.opacity="0.5",_=!0,ee.style.opacity="0",setTimeout((()=>ee.style.opacity=""),50);try{const e=y?await f.takePhoto():await f.grabFrame();w(),await He(e),m()}catch(e){}_=!1,we.style.opacity="1"}};we.addEventListener("click",E);let x=!1;ge.src=t(Y);const I=async()=>{try{x=!x,await h.applyConstraints({advanced:[{torch:x}]}),ge.src=t(x?J:Y)}catch(e){}};return ue.addEventListener("click",I),{deviceId:n.deviceId,close(){w(),we.removeEventListener("click",E),ue.removeEventListener("click",I),ce.removeEventListener("click",v),ee.removeEventListener("loadedmetadata",p),ee.pause();for(const e of l.getTracks())e.stop()}}};(async()=>{let e=await Ae(localStorage.getItem("defaultDevice"));const t=()=>{for(const e of ae.options)e.style.fontWeight="";ae.selectedOptions[0].style.fontWeight="bold"};for(const e of await navigator.mediaDevices.enumerateDevices())if("videoinput"==e.kind){const t=document.createElement("option");t.value=e.deviceId,t.label=e.label,ae.appendChild(t)}ae.value=e.deviceId,t();const n=async()=>{t(),e.close(),ae.disabled=!0,localStorage.setItem("defaultDevice",ae.value),e=await Ae(ae.value),ae.disabled=!1};ae.onchange=n,Be(n),pe.onchange=async()=>{for(const e of pe.files)await He(e)},ye.onclick=async()=>{((e,t)=>{const n=URL.createObjectURL(e),r=document.createElement("a");r.download=t,r.href=n,r.click(),URL.revokeObjectURL(n)})(new Blob([await X(await Promise.all(ke.map((({page:e})=>{return t=e.data,n=e.quad,q({type:"extract-document",data:t,region:n,targetWidth:1224},!0?[t.data.buffer]:[]);var t,n}))))]),"out.pdf"),ke.length=0}})();var Xe;Xe=o("kPq84").getBundleURL("d3X8m")+"workers/"+o("bXuNP").resolve("HMBE2"),navigator.serviceWorker.register(Xe);
//# sourceMappingURL=index.53a7b691.js.map
